{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chitanya\\\\Desktop\\\\mini\\\\paymentor\\\\paymentor\\\\src\\\\Components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport '../index.css';\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport firebase from \"../backend/firebase\";\nimport CryptoJS from \"crypto-js\";\nimport { useCookies } from 'react-cookie';\nimport { useLocation } from \"react-router\"; // import {BrowserRouter as Router, Route, Switch} from \"react-router-dom\"\n// import { useForm } from \"react-hook-form\";\n// import { yupResolver } from \"@hookform/resolvers/yup\";\n// import * as yup from \"yup\";\n// const schema = yup.object().shape({\n//     username: yup.string().required(),\n//     password: yup.string().min(4).max(8).required()\n// })\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const emailRef = useRef();\n  const passwordRef = useRef();\n  const {\n    login\n  } = useAuth();\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [newUsername, setnewUsername] = useState(\"\");\n  const [newPassword, setnewPassword] = useState(\"\");\n  const [info, setinfo] = useState([]);\n  const [cookies, setCookie] = useCookies(['user']);\n\n  const Oncheck = () => {\n    if (newUsername == \"\" || newPassword == \"\") {\n      alert(\"Enter information first...!\");\n    } else {\n      const ref = firebase.firestore();\n      ref.collection(\"User\").doc(newUsername).get().then(snapshot => check_valid(snapshot, newUsername, newPassword));\n    }\n  };\n\n  const check_valid = (snapshot, newUsername, newPassword) => {\n    // const decryptedData = \"\";\n    if (newUsername != snapshot.get(\"URN\")) {\n      alert(\"No...\");\n      const bytes = CryptoJS.AES.decrypt(snapshot.get(\"Password\"), 'my-secret-key@123');\n      const decryptedData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n    } else if (newUsername == snapshot.get(\"URN\") && newPassword == decryptedData) {\n      // setCookie('Name', newUsername, { path: '/' });\n      // setCookie('Password', newPassword , { path: '/' });\n      //alert(\"Yes...!\");\n      localStorage.setItem('username', newUsername);\n      history.push(\"/userdashboard\", {\n        state: {\n          newUsername\n        }\n      }); //handleSubmit()\n    } else {\n      alert(\"Failed to Login!\");\n      setError(\"Failed to log in\");\n    }\n  }; // async function handleSubmit(e) {\n  //     e.preventDefault()\n  //     try {\n  //     setError(\"\")\n  //     setLoading(true)\n  //     await Oncheck(newUsername,newPassword);\n  //     //await check_valid(newUsername,newPassword) //(emailRef.current.value, passwordRef.current.value)\n  //     //history.push(\"/userdashboard\")\n  //     } catch {\n  //     setError(\"Failed to log in\")\n  //     // alert(\"Enter Valid Username & Password !\")\n  //     }\n  //     setLoading(false)\n  // }\n\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    try {\n      setError(\"\");\n      setLoading(true); // await login(emailRef.current.value, passwordRef.current.value)\n      // history.push(\"/userdashboard\")\n    } catch {\n      setError(\"Failed to log in\"); // alert(\"Enter Valid Username & Password !\")\n    }\n\n    setLoading(false);\n  } //     const userRef = useRef()\n  //     const passwordRef = useRef()\n  //     // const { login } = useAuth()\n  //     const [error, setError] = useState(\"\")\n  //     const [loading, setLoading] = useState(false)\n  //     const history = useHistory()\n  //     const [users, setUsers] = useState([]);\n  //     const userCollectionRef = collection(db ,\"User\");\n  //     const [currentUsername, setcurrentUsername] = useState()\n  //     const [currentUserpass, setcurrentUserpass] = useState()\n  //     const [inputUsername, setinputUsername] = useState()\n  //     const [inputUserpass, setinputUserpass] = useState()\n  //     useEffect(() => {\n  //     const getUsers = async () => {\n  //         const data = await getDocs(userCollectionRef)\n  //         setUsers(data.docs.map((doc) => ({...doc.data(), id: doc.username})))\n  //         }\n  //         getUsers()\n  //     }, [])\n  //     // emailRef.current.value, passwordRef.current.value\n  //     const loginuser = () => {\n  //         setcurrentUsername( users.find((user) => {\n  //             return ( user.username  === inputUsername) \n  //         }))\n  //         setcurrentUserpass( users.find((user) => {\n  //             return (user.password === inputUserpass) \n  //         })\n  //         )\n  //         try {if (currentUsername.username == inputUsername) {\n  //             history.push(\"/userdashboard\")\n  //         } else {\n  //             alert(\"Input Correct Details\")\n  //         }} catch(err) {\n  //             console.log(err);\n  //         }\n  //         console.log(currentUsername);\n  //         console.log(inputUsername);\n  //     }\n  //     // async function handleSubmit(e) {\n  //     //     e.preventDefault()\n  //     //     try {\n  //     //     setError(\"\")\n  //     //     setLoading(true)\n  //     //     await loginuser(inputUsername, inputUserpass)\n  //     //     history.push(\"/userdashboard\")\n  //     //     } catch {\n  //     //     alert(\"Failed to log in\")\n  //     //     // alert(\"Enter Valid Username & Password !\")\n  //     //     }\n  //     //     setLoading(false)\n  //     // }\n  //     // async function handleSubmit(e) {\n  //     //     e.preventDefault()\n  //     //     try {\n  //     //     setError(\"\")\n  //     //     setLoading(true)\n  //     //     await login(userRef.current.value, passwordRef.current.value)\n  //     //     history.push(\"/\")\n  //     //     } catch {\n  //     //     setError(\"Failed to log in\")\n  //     //     }\n  //     //     setLoading(false)\n  //     // }\n  // //     const { register, handleSubmit, errors } = useForm({\n  // //     resolver: yupResolver(schema),\n  // //   });\n  // //     const onSubmit = (data) => {\n  // //         console.log(data);\n  // //     };\n\n\n  const checkOnlineStatus = async () => {\n    try {\n      const online = await fetch(\"/1pixel.png\");\n      return online.status >= 200 && online.status < 300; // either true or false\n    } catch (err) {\n      return false; // definitely offline\n    }\n  }; //   setInterval(async () => {\n  //   const result = await checkOnlineStatus();\n  //   const statusDisplay = document.getElementById(\"status\");\n  //   statusDisplay.textContent = result ? \"Online\" : \"OFFline\";\n  // }, 3000); // probably too often, try 30000 for every 30 seconds\n\n\n  window.addEventListener(\"load\", async event => {\n    const status = \"\";\n    status = (await checkOnlineStatus()) ? \"Online\" : \"OFFline\";\n    setError(status);\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bgcolor row vh-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"part1 col-md-6 d-flex flex-column justify-content-center align-items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title fw-bold\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fw-light\",\n            children: \"ADCET \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 55\n          }, this), \" Paymentor\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"part2 col-md-6 bg-white br d-flex flex-column justify-content-start justify-content-md-center align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn login-btn btn-outline-primary rounded-pill\",\n          onClick: () => {\n            history.push('/adminlogin');\n          },\n          children: \"Admin Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"l-title\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"fw-bold mb-4 fs-3\",\n              children: \"Log in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-danger \",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"d-flex flex-column align-items-center\",\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"form-group mb-3\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                class: \"form-control\",\n                name: \"username\",\n                id: \"username\",\n                placeholder: \"username\",\n                ref: emailRef,\n                onChange: e => setnewUsername(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"form-group mb-5\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                class: \"form-control\",\n                name: \"password\",\n                id: \"password\",\n                placeholder: \"password\",\n                ref: passwordRef,\n                onChange: e => setnewPassword(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => Oncheck(newUsername, newPassword),\n              className: \"btn btn-primary px-4 py-2 w-100\",\n              disabled: loading,\n              type: \"submit\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }, this), cookies.newUsername && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Name: \", /*#__PURE__*/_jsxDEV(\"p\", {\n          children: cookies.newUsername\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 25\n      }, this), cookies.newPassword && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Password: \", /*#__PURE__*/_jsxDEV(\"p\", {\n          children: cookies.newPassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 16\n    }, this)\n  }, void 0, false);\n};\n\n_s(Login, \"i6TcGss2ehTRYIt3KyS3B8TYuFU=\", false, function () {\n  return [useAuth, useHistory, useCookies];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/chitanya/Desktop/mini/paymentor/paymentor/src/Components/Login.js"],"names":["React","useRef","useState","Link","useHistory","useAuth","firebase","CryptoJS","useCookies","useLocation","Login","emailRef","passwordRef","login","error","setError","loading","setLoading","history","newUsername","setnewUsername","newPassword","setnewPassword","info","setinfo","cookies","setCookie","Oncheck","alert","ref","firestore","collection","doc","get","then","snapshot","check_valid","bytes","AES","decrypt","decryptedData","JSON","parse","toString","enc","Utf8","localStorage","setItem","push","state","handleSubmit","e","preventDefault","checkOnlineStatus","online","fetch","status","err","window","addEventListener","event","target","value"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\"\r\nimport '../index.css';\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport { useAuth } from \"../contexts/AuthContext\"\r\nimport firebase from \"../backend/firebase\"\r\nimport CryptoJS from \"crypto-js\";\r\nimport { useCookies } from 'react-cookie';\r\n\r\nimport { useLocation } from \"react-router\";\r\n\r\n// import {BrowserRouter as Router, Route, Switch} from \"react-router-dom\"\r\n// import { useForm } from \"react-hook-form\";\r\n// import { yupResolver } from \"@hookform/resolvers/yup\";\r\n// import * as yup from \"yup\";\r\n\r\n// const schema = yup.object().shape({\r\n//     username: yup.string().required(),\r\n//     password: yup.string().min(4).max(8).required()\r\n// })\r\n\r\nconst Login = () => {\r\n\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const { login } = useAuth()\r\n    const [error, setError] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const history = useHistory()\r\n\r\n    const[newUsername,setnewUsername]=useState(\"\");\r\n    const[newPassword,setnewPassword]=useState(\"\");\r\n    const[info,setinfo]=useState([]);\r\n    const [cookies, setCookie] = useCookies(['user']);\r\n\r\n\r\n        const Oncheck = () =>{\r\n\r\n            if(newUsername == \"\" || newPassword == \"\"){\r\n                alert(\"Enter information first...!\")\r\n            }\r\n            else{\r\n                const ref= firebase.firestore();\r\n                ref.collection(\"User\").doc(newUsername).get()\r\n                .then(snapshot=>\r\n                    check_valid(snapshot,newUsername,newPassword)\r\n                    )\r\n            }\r\n        \r\n    }\r\n    \r\n    const check_valid = (snapshot,newUsername,newPassword)=>{\r\n        \r\n        // const decryptedData = \"\";\r\n        \r\n\r\n        if(newUsername != snapshot.get(\"URN\") ){\r\n            alert(\"No...\")\r\n            const bytes = CryptoJS.AES.decrypt(snapshot.get(\"Password\"),'my-secret-key@123');\r\n        const decryptedData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\r\n        }\r\n        else if(newUsername==snapshot.get(\"URN\") && newPassword == decryptedData ){\r\n            // setCookie('Name', newUsername, { path: '/' });\r\n            // setCookie('Password', newPassword , { path: '/' });\r\n            //alert(\"Yes...!\");\r\n            localStorage.setItem('username', newUsername)\r\n            history.push(\"/userdashboard\",{state:{newUsername}});\r\n           //handleSubmit()\r\n        } \r\n        else{\r\n            alert(\"Failed to Login!\");\r\n            setError(\"Failed to log in\")\r\n        }\r\n    } \r\n\r\n    // async function handleSubmit(e) {\r\n    //     e.preventDefault()\r\n\r\n    //     try {\r\n    //     setError(\"\")\r\n    //     setLoading(true)\r\n    //     await Oncheck(newUsername,newPassword);\r\n    //     //await check_valid(newUsername,newPassword) //(emailRef.current.value, passwordRef.current.value)\r\n    //     //history.push(\"/userdashboard\")\r\n    //     } catch {\r\n    //     setError(\"Failed to log in\")\r\n    //     // alert(\"Enter Valid Username & Password !\")\r\n    //     }\r\n\r\n    //     setLoading(false)\r\n    // }\r\n    \r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        try {\r\n        setError(\"\")\r\n        setLoading(true)\r\n        // await login(emailRef.current.value, passwordRef.current.value)\r\n        // history.push(\"/userdashboard\")\r\n        } catch {\r\n        setError(\"Failed to log in\")\r\n        // alert(\"Enter Valid Username & Password !\")\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n\r\n\r\n//     const userRef = useRef()\r\n//     const passwordRef = useRef()\r\n//     // const { login } = useAuth()\r\n//     const [error, setError] = useState(\"\")\r\n//     const [loading, setLoading] = useState(false)\r\n//     const history = useHistory()\r\n\r\n//     const [users, setUsers] = useState([]);\r\n//     const userCollectionRef = collection(db ,\"User\");\r\n\r\n//     const [currentUsername, setcurrentUsername] = useState()\r\n//     const [currentUserpass, setcurrentUserpass] = useState()\r\n//     const [inputUsername, setinputUsername] = useState()\r\n//     const [inputUserpass, setinputUserpass] = useState()\r\n\r\n//     useEffect(() => {\r\n    \r\n//     const getUsers = async () => {\r\n//         const data = await getDocs(userCollectionRef)\r\n//         setUsers(data.docs.map((doc) => ({...doc.data(), id: doc.username})))\r\n//         }\r\n\r\n//         getUsers()\r\n//     }, [])\r\n//     // emailRef.current.value, passwordRef.current.value\r\n    \r\n//     const loginuser = () => {\r\n//         setcurrentUsername( users.find((user) => {\r\n//             return ( user.username  === inputUsername) \r\n//         }))\r\n\r\n//         setcurrentUserpass( users.find((user) => {\r\n//             return (user.password === inputUserpass) \r\n//         })\r\n//         )\r\n\r\n//         try {if (currentUsername.username == inputUsername) {\r\n//             history.push(\"/userdashboard\")\r\n//         } else {\r\n//             alert(\"Input Correct Details\")\r\n//         }} catch(err) {\r\n//             console.log(err);\r\n//         }\r\n//         console.log(currentUsername);\r\n//         console.log(inputUsername);\r\n        \r\n\r\n//     }\r\n\r\n//     // async function handleSubmit(e) {\r\n//     //     e.preventDefault()\r\n\r\n//     //     try {\r\n//     //     setError(\"\")\r\n//     //     setLoading(true)\r\n//     //     await loginuser(inputUsername, inputUserpass)\r\n//     //     history.push(\"/userdashboard\")\r\n//     //     } catch {\r\n//     //     alert(\"Failed to log in\")\r\n//     //     // alert(\"Enter Valid Username & Password !\")\r\n//     //     }\r\n\r\n//     //     setLoading(false)\r\n//     // }\r\n    \r\n\r\n\r\n//     // async function handleSubmit(e) {\r\n//     //     e.preventDefault()\r\n\r\n//     //     try {\r\n//     //     setError(\"\")\r\n//     //     setLoading(true)\r\n//     //     await login(userRef.current.value, passwordRef.current.value)\r\n//     //     history.push(\"/\")\r\n//     //     } catch {\r\n//     //     setError(\"Failed to log in\")\r\n//     //     }\r\n\r\n//     //     setLoading(false)\r\n//     // }\r\n\r\n\r\n// //     const { register, handleSubmit, errors } = useForm({\r\n// //     resolver: yupResolver(schema),\r\n// //   });\r\n\r\n// //     const onSubmit = (data) => {\r\n// //         console.log(data);\r\n// //     };\r\nconst checkOnlineStatus = async () => {\r\n    try {\r\n      const online = await fetch(\"/1pixel.png\");\r\n      return online.status >= 200 && online.status < 300; // either true or false\r\n    } catch (err) {\r\n      return false; // definitely offline\r\n    }\r\n  };\r\n//   setInterval(async () => {\r\n//   const result = await checkOnlineStatus();\r\n//   const statusDisplay = document.getElementById(\"status\");\r\n//   statusDisplay.textContent = result ? \"Online\" : \"OFFline\";\r\n// }, 3000); // probably too often, try 30000 for every 30 seconds\r\nwindow.addEventListener(\"load\", async (event) => {\r\n    const status = \"\"\r\n      status = (await checkOnlineStatus())\r\n      ? \"Online\"\r\n      : \"OFFline\";\r\n\r\n      setError(status)\r\n  });\r\n                        \r\n    return (\r\n        <>\r\n          \r\n               \r\n               <div className=\"bgcolor row vh-100\">\r\n                \r\n                    <div className=\"part1 col-md-6 d-flex flex-column justify-content-center align-items-center\">\r\n                        {/* <img src=\"/paylogo.svg\" alt=\"logo\" className=\"w-50\" /> */}\r\n                        <h1 className=\"title fw-bold\"><span className=\"fw-light\">ADCET </span> Paymentor</h1>\r\n                        \r\n                    </div>\r\n                    \r\n                    <div className=\"part2 col-md-6 bg-white br d-flex flex-column justify-content-start justify-content-md-center align-items-center\">\r\n                   \r\n                        \r\n                          <button type=\"button\" className=\"btn login-btn btn-outline-primary rounded-pill\" \r\n                          onClick={() => {history.push('/adminlogin')}} >Admin Login</button>\r\n                    \r\n                    \r\n                        <div className=\"form\">\r\n                                <div className=\"l-title\">\r\n                                    <h5 className=\"fw-bold mb-4 fs-3\">Log in</h5>\r\n                                </div>\r\n                                <div className=\"error\">\r\n                                    <p className=\"text-danger \">{error}</p>\r\n                                </div>\r\n                                {/* action=\"#\" method=\"post\" */}\r\n                                <form className=\"d-flex flex-column align-items-center\" onSubmit={handleSubmit}>\r\n                            \r\n                                        <div class=\"form-group mb-3\">\r\n                                            <input type=\"text\" class=\"form-control\" name=\"username\" id=\"username\" placeholder=\"username\" ref={emailRef} \r\n                                            onChange={e=> setnewUsername(e.target.value)}\r\n                                            />\r\n                                        </div>\r\n                                        <div class=\"form-group mb-5\">\r\n                                            <input type=\"password\" class=\"form-control\" name=\"password\" id=\"password\" placeholder=\"password\" ref={passwordRef}\r\n                                            onChange={e=> setnewPassword(e.target.value)}\r\n                                            />\r\n                                        </div>\r\n                                        {/* <input className=\"btn btn-primary px-4 py-2 w-100\" type=\"button\" value=\"Login\" disabled={loading} type=\"submit\"/> */}\r\n                                        <button onClick={()=>Oncheck(newUsername,newPassword)} className=\"btn btn-primary px-4 py-2 w-100\" disabled={loading} type=\"submit\">Login</button>\r\n                                        \r\n                                </form>\r\n                        </div>\r\n                                \r\n\r\n                    </div>\r\n                   \r\n                    \r\n                    {/* <div className=\"container-lg flex-column d-flex align-items-center justify-content-center bg-white shadow br part2\">\r\n                       \r\n\r\n                            <div className=\"align-items-end w-50\">\r\n                            <h5 className=\"fw-bold mb-3 fs-3 align-self-start\">Log in</h5>\r\n                                <form className=\"d-flex flex-column align-items-center\" action=\"#\" method=\"post\">\r\n                                <div class=\"form-floating mb-3\">\r\n                                    <input type=\"text\" class=\"form-control\" name=\"username\" id=\"username\" placeholder=\"username\" />\r\n                                    <label for=\"username\">Username</label>\r\n                                </div>\r\n                                <div class=\"form-floating mb-5\">\r\n                                    <input type=\"password\" class=\"form-control\" name=\"password\" id=\"password\" placeholder=\"password\"/>\r\n                                    <label for=\"password\">Password</label>\r\n\r\n                                </div>\r\n                                <input className=\"btn btn-primary px-4 py-2\" type=\"button\" value=\"Login\" />\r\n                                </form>\r\n                                \r\n\r\n                            </div>\r\n                    </div> */}\r\n\r\n                    {cookies.newUsername && (\r\n                        <div>\r\n                            Name: <p>{cookies.newUsername}</p>\r\n                        </div>\r\n                        )}\r\n                        {cookies.newPassword && (\r\n                        <div>\r\n                            Password: <p>{cookies.newPassword}</p>\r\n                        </div>\r\n                        )}\r\n\r\n                </div>\r\n                    \r\n                    \r\n            {/* </div> */}\r\n\r\n                \r\n\r\n           \r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"F:\\\\MiniProject\\\\New folder\\\\paymentor\\\\src\\\\Components\\\\Generatepdf.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport firebase from \"../backend/firebase\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport Add from './Add';\nimport ReactLoading from 'react-loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Generatepdf = () => {\n  _s();\n\n  const {\n    currentUser\n  } = useAuth();\n  const namestr = currentUser && currentUser.email;\n  const [name, setname] = useState(\"\");\n  const [Class, setClass] = useState(\"\");\n  const [dept, setdept] = useState(\"\");\n  const [fee, setfee] = useState(0);\n  const [category, setcategory] = useState(\"\");\n  const [recept, setrecept] = useState(\"\");\n  const [loading, setloading] = useState();\n  const [info, setinfo] = useState({\n    name: \"\",\n    receiptid: \"\",\n    fee: 0,\n    Class: \"\",\n    dept: \"\",\n    category: \"\"\n  });\n  console.log(namestr.slice(0, -14)); // const receipt = () =>{\n  // }\n  // useEffect(() => {\n  //     )\n  // setinfo({...info, \n  //     name: currentUser.URN,\n  //     receiptid: currentUser.Password,\n  //     class: currentUser.Class,\n  //     dept: currentUser.department,\n  //     category: currentUser.Category,\n  //     fee: currentUser.Fee,\n  // })\n  // }, [])\n\n  const addData = () => {\n    const ref = firebase.firestore();\n    ref.collection(\"User\").doc(namestr.slice(0, -14)).get().then(snapshot => {\n      {\n        setname(snapshot.get(\"Name\"));\n      }\n      {\n        setClass(snapshot.get(\"Class\"));\n      }\n      {\n        setdept(snapshot.get(\"department\"));\n      }\n      {\n        setcategory(snapshot.get(\"Category\"));\n      }\n    });\n    ref.collection(\"Payment\").doc(namestr.slice(0, -14)).get().then(snapshot => {\n      {\n        setfee(snapshot.get(\"Amount\"));\n      }\n      {\n        setrecept(snapshot.get(\"OrderId\"));\n      }\n    });\n    setinfo({ ...info,\n      name: name,\n      receiptid: recept,\n      fee: fee,\n      Class: Class,\n      dept: dept,\n      category: category\n    });\n    console.log(info);\n\n    const generatePdf = () => {\n      try {\n        axios.post('/create-pdf', info).then(() => axios.get('fetch-pdf', {\n          responseType: 'blob'\n        })).then(res => {\n          const pdfBlob = new Blob([res.data], {\n            type: 'application/pdf'\n          });\n          saveAs(pdfBlob, 'FeeReceipt.pdf');\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    if (info.name != \"\") {\n      generatePdf();\n      setloading(false);\n    } else {\n      setloading(true);\n    }\n  }; //     const generatePdf = () => {\n  //             try { axios.post('/create-pdf', info)\n  //           .then(() => axios.get('fetch-pdf', { responseType: 'blob' }))\n  //           .then((res) => {\n  //              const  pdfBlob = new Blob([res.data], { type: 'application/pdf' });\n  //             saveAs(pdfBlob, 'FeeReceipt.pdf');\n  //           })\n  //       } catch (error) {\n  //         console.log(error);\n  //     }\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"btn btn-primary \",\n        type: \"submit\",\n        name: \"submit\",\n        value: \"Receipt\",\n        onClick: addData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div\",\n      children: !loading ? \"\" : /*#__PURE__*/_jsxDEV(ReactLoading, {\n        type: 'bubbles',\n        color: \"#000000\",\n        height: 300,\n        width: 200\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 31\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Generatepdf, \"sN8wQUGRm4tt8Kwf1vgk74rkT0E=\", false, function () {\n  return [useAuth];\n});\n\n_c = Generatepdf;\nexport default Generatepdf;\n\nvar _c;\n\n$RefreshReg$(_c, \"Generatepdf\");","map":{"version":3,"sources":["F:/MiniProject/New folder/paymentor/src/Components/Generatepdf.js"],"names":["React","useState","useEffect","axios","saveAs","firebase","useAuth","Add","ReactLoading","Generatepdf","currentUser","namestr","email","name","setname","Class","setClass","dept","setdept","fee","setfee","category","setcategory","recept","setrecept","loading","setloading","info","setinfo","receiptid","console","log","slice","addData","ref","firestore","collection","doc","get","then","snapshot","generatePdf","post","responseType","res","pdfBlob","Blob","data","type","error"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from \"axios\"\r\nimport { saveAs } from \"file-saver\"\r\nimport firebase from \"../backend/firebase\"\r\nimport { useAuth } from \"../contexts/AuthContext\"\r\nimport Add from './Add'\r\nimport ReactLoading from 'react-loading';\r\n\r\n\r\nconst Generatepdf = () => {\r\n    const { currentUser } = useAuth()\r\n    const namestr = currentUser &&currentUser.email\r\n\r\n    const [name, setname] = useState(\"\")\r\n    const [Class, setClass] = useState(\"\")\r\n    const [dept, setdept] = useState(\"\")\r\n    const [fee, setfee] = useState(0)\r\n    const [category, setcategory] = useState(\"\")\r\n    const [recept, setrecept] = useState(\"\")\r\n    const [loading, setloading] = useState()\r\n\r\n    const [info, setinfo] = useState({\r\n        name: \"\",\r\n        receiptid: \"\",\r\n        fee: 0,\r\n        Class: \"\",\r\n        dept: \"\",\r\n        category:\"\"\r\n    })\r\n\r\n    console.log(namestr.slice(0,-14));\r\n    // const receipt = () =>{\r\n        \r\n    // }\r\n\r\n    // useEffect(() => {\r\n  \r\n        \r\n        \r\n        \r\n    //     )\r\n\r\n        // setinfo({...info, \r\n        //     name: currentUser.URN,\r\n        //     receiptid: currentUser.Password,\r\n        //     class: currentUser.Class,\r\n        //     dept: currentUser.department,\r\n        //     category: currentUser.Category,\r\n        //     fee: currentUser.Fee,\r\n        // })\r\n        \r\n    // }, [])\r\n        \r\n    const addData =  () => {\r\n        \r\n        const ref= firebase.firestore();\r\n        ref.collection(\"User\").doc(namestr.slice(0,-14)).get()\r\n        .then(snapshot=>{\r\n        {setname(snapshot.get(\"Name\"))}\r\n        {setClass(snapshot.get(\"Class\"))}\r\n        {setdept(snapshot.get(\"department\"))}\r\n        {setcategory(snapshot.get(\"Category\"))}\r\n        }\r\n        )\r\n\r\n        ref.collection(\"Payment\").doc(namestr.slice(0,-14)).get()\r\n        .then(snapshot=>{\r\n                {setfee(snapshot.get(\"Amount\"))}\r\n                {setrecept(snapshot.get(\"OrderId\"))}\r\n                }\r\n        )\r\n        \r\n        setinfo(\r\n        {...info, \r\n                name: name,\r\n                receiptid: recept,\r\n                fee: fee,\r\n                Class: Class,\r\n                dept: dept,\r\n                category:category    \r\n        }\r\n        )\r\n        console.log(info);\r\n\r\n        const generatePdf = () => {\r\n            \r\n                    try {axios.post('/create-pdf', info)\r\n                .then(() => axios.get('fetch-pdf', { responseType: 'blob' }))\r\n                .then((res) => {\r\n                    const  pdfBlob = new Blob([res.data], { type: 'application/pdf' });\r\n            \r\n                    saveAs(pdfBlob, 'FeeReceipt.pdf');\r\n                })\r\n            } catch (error) {\r\n                console.log(error);\r\n                \r\n            }\r\n    \r\n        }\r\n\r\n        if (info.name!=\"\") {\r\n            generatePdf()\r\n            setloading(false)\r\n\r\n        }else {\r\n            setloading(true)\r\n        }\r\n        \r\n    }\r\n       \r\n\r\n    \r\n\r\n//     const generatePdf = () => {\r\n\r\n\r\n        \r\n//             try { axios.post('/create-pdf', info)\r\n//           .then(() => axios.get('fetch-pdf', { responseType: 'blob' }))\r\n//           .then((res) => {\r\n//              const  pdfBlob = new Blob([res.data], { type: 'application/pdf' });\r\n    \r\n//             saveAs(pdfBlob, 'FeeReceipt.pdf');\r\n//           })\r\n//       } catch (error) {\r\n//         console.log(error);\r\n        \r\n//     }\r\n    \r\n// }\r\n    return (\r\n        <>\r\n            {/* setinfo({...info, name: e.target.value}); */}\r\n                                \r\n\r\n            <p><input className=\"btn btn-primary \" type=\"submit\" name=\"submit\" value=\"Receipt\" \r\n                onClick={addData} \r\n            /></p>\r\n\r\n            <div className=\"div\">\r\n            { !loading ? \"\": (<ReactLoading type={'bubbles'} color={\"#000000\"} height={300} width={200} />)}\r\n            </div>\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Generatepdf\r\n"]},"metadata":{},"sourceType":"module"}
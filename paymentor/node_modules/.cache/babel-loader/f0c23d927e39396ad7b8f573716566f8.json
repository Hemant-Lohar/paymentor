{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chitanya\\\\Desktop\\\\mini\\\\paymentor\\\\paymentor\\\\src\\\\Components\\\\Generatepdf.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport firebase from \"../backend/firebase\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useCookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Generatepdf = () => {\n  _s();\n\n  const {\n    currentUser\n  } = useAuth();\n  const namestr = currentUser && currentUser.email;\n  const [newName, setnewName] = React.useState(\"\");\n  const [cookies, setCookie] = useCookies(['user']);\n  setCookie(Cookies.get(\"Name\"));\n  const [info, setinfo] = useState({\n    name: \"\",\n    receiptid: \"\",\n    fee: 0,\n    Class: \"\",\n    dept: \"\",\n    category: \"\"\n  });\n  console.log(namestr.slice(0, -14));\n  console.log(info); // const receipt = () =>{\n  // }\n  // useEffect(() => {\n  //     )\n  // setinfo({...info, \n  //     name: currentUser.URN,\n  //     receiptid: currentUser.Password,\n  //     class: currentUser.Class,\n  //     dept: currentUser.department,\n  //     category: currentUser.Category,\n  //     fee: currentUser.Fee,\n  // })\n  // }, [])\n\n  const generatePdf = () => {\n    const ref = firebase.firestore();\n    ref.collection(\"Payment\").doc().get().then(snapshot => setinfo({ ...info,\n      name: snapshot.get(\"Name\"),\n      Class: snapshot.get(\"Class\"),\n      dept: snapshot.get(\"department\"),\n      category: snapshot.get(\"Category\"),\n      receiptid: snapshot.get(\"OrderId\"),\n      fee: snapshot.get(\"Amount\")\n    })); // ref.collection(\"User\",\"Payment\").doc(namestr.slice(0,-14)).get()\n    // .then(snapshot=>\n    // setinfo({...info, name:snapshot.get(\"Name\"),\n    //         Class: snapshot.get(\"Class\"),\n    //         department: snapshot.get(\"depertment\"),\n    //         category: snapshot.get(\"Category\")})\n    // )\n\n    try {\n      axios.post('/create-pdf', info).then(() => axios.get('fetch-pdf', {\n        responseType: 'blob'\n      })).then(res => {\n        const pdfBlob = new Blob([res.data], {\n          type: 'application/pdf'\n        });\n        saveAs(pdfBlob, 'FeeReceipt.pdf');\n      });\n    } catch (error) {\n      console.log(error);\n    }\n\n    console.log(info);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"btn btn-primary \",\n        type: \"submit\",\n        name: \"submit\",\n        value: \"Receipt\",\n        onClick: generatePdf\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Generatepdf, \"43xgqjwDrcxwQbSOxtyNmowZxpw=\", false, function () {\n  return [useAuth, useCookies];\n});\n\n_c = Generatepdf;\nexport default Generatepdf;\n\nvar _c;\n\n$RefreshReg$(_c, \"Generatepdf\");","map":{"version":3,"sources":["C:/Users/chitanya/Desktop/mini/paymentor/paymentor/src/Components/Generatepdf.js"],"names":["React","useState","useEffect","axios","saveAs","firebase","useAuth","useCookies","Generatepdf","currentUser","namestr","email","newName","setnewName","cookies","setCookie","Cookies","get","info","setinfo","name","receiptid","fee","Class","dept","category","console","log","slice","generatePdf","ref","firestore","collection","doc","then","snapshot","post","responseType","res","pdfBlob","Blob","data","type","error"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from \"axios\"\r\nimport { saveAs } from \"file-saver\"\r\nimport firebase from \"../backend/firebase\"\r\nimport { useAuth } from \"../contexts/AuthContext\"\r\nimport { useCookies } from 'react-cookie'\r\n\r\nconst Generatepdf = () => {\r\n    const { currentUser } = useAuth()\r\n    const namestr = currentUser &&currentUser.email\r\n\r\n    const [newName, setnewName] = React.useState(\"\");\r\n    const [cookies, setCookie] = useCookies(['user']);\r\n      setCookie(Cookies.get(\"Name\"))\r\n\r\n    const [info, setinfo] = useState({\r\n        name: \"\",\r\n        receiptid: \"\",\r\n        fee: 0,\r\n        Class: \"\",\r\n        dept: \"\",\r\n        category:\"\"\r\n    })\r\n\r\n    console.log(namestr.slice(0,-14));\r\n    console.log(info);\r\n    // const receipt = () =>{\r\n        \r\n    // }\r\n\r\n    // useEffect(() => {\r\n  \r\n        \r\n        \r\n        \r\n    //     )\r\n\r\n        // setinfo({...info, \r\n        //     name: currentUser.URN,\r\n        //     receiptid: currentUser.Password,\r\n        //     class: currentUser.Class,\r\n        //     dept: currentUser.department,\r\n        //     category: currentUser.Category,\r\n        //     fee: currentUser.Fee,\r\n        // })\r\n        \r\n    // }, [])\r\n\r\n    const generatePdf = () => {\r\n        const ref= firebase.firestore();\r\n        ref.collection(\"Payment\").doc().get()\r\n        .then(snapshot=>\r\n        setinfo({...info, name:snapshot.get(\"Name\"),\r\n                Class: snapshot.get(\"Class\"),\r\n                dept: snapshot.get(\"department\"),\r\n                category: snapshot.get(\"Category\"),\r\n                receiptid: snapshot.get(\"OrderId\"),\r\n                fee: snapshot.get(\"Amount\")})\r\n        )\r\n\r\n        // ref.collection(\"User\",\"Payment\").doc(namestr.slice(0,-14)).get()\r\n        // .then(snapshot=>\r\n        // setinfo({...info, name:snapshot.get(\"Name\"),\r\n        //         Class: snapshot.get(\"Class\"),\r\n        //         department: snapshot.get(\"depertment\"),\r\n        //         category: snapshot.get(\"Category\")})\r\n        // )\r\n            \r\n            try {axios.post('/create-pdf', info)\r\n          .then(() => axios.get('fetch-pdf', { responseType: 'blob' }))\r\n          .then((res) => {\r\n            const pdfBlob = new Blob([res.data], { type: 'application/pdf' });\r\n    \r\n            saveAs(pdfBlob, 'FeeReceipt.pdf');\r\n          })\r\n      } catch (error) {\r\n        console.log(error);\r\n        \r\n    }\r\n    console.log(info);\r\n    \r\n}\r\n    return (\r\n        <>\r\n            {/* setinfo({...info, name: e.target.value}); */}\r\n                                \r\n\r\n            <p><input className=\"btn btn-primary \" type=\"submit\" name=\"submit\" value=\"Receipt\" \r\n                onClick={generatePdf} \r\n            /></p>\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Generatepdf\r\n"]},"metadata":{},"sourceType":"module"}